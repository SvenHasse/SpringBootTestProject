{
  "name": "outbound-service",
  "dockerComposeFile": "docker-compose.yml",
  "service": "main-dev-container",
  "workspaceFolder": "/workspace",

  "settings": {
    "terminal.integrated.shell.linux": "/bin/bash"
  },

  "features": {
     "ghcr.io/devcontainers-contrib/features/maven-sdkman:2": {
       "version": "latest"
     }
  },

  "postCreateCommand": "wget -O /workspace/opentelemetry-javaagent.jar https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/download/v1.15.0/opentelemetry-javaagent.jar",

  "postStartCommand": "git config --global --add safe.directory /workspace && mvn clean compile",

  "containerEnv": {
    "OTEL_LOGS_EXPORTER": "logging",
    "OTEL_METRICS_EXPORTER": "none",
    "OTEL_TRACES_EXPORTER": "logging",
    "JAVA_TOOL_OPTIONS": "-javaagent:/workspace/opentelemetry-javaagent.jar"
  },

  "forwardPorts": [
    8081,
    5432,
    15672,
    5672
  ]
}
